query AllRelevantEntities($accounts: [String!]!, $tokens: [String!]!) {
  poolDistributors(
    first: 1000
    where: { account_in: $accounts, pool_: { token_in: $tokens } }
  ) {
    flowRate
    account {
      id
      isSuperApp
    }
    pool {
      id
      token {
        id
      }
    }
  }
  poolMembers(first: 1000, where: { account_in: $accounts }) {
    units
    account {
      id
      isSuperApp
    }
    pool {
      id
      flowRate
      totalUnits
      poolDistributors(first: 1000) {
        flowRate
        account {
          id
          isSuperApp
        }
      }
      token {
        id
      }
    }
  }
  streams(
    first: 1000
    where: {
      or: [
        { receiver_in: $accounts, token_in: $tokens }
        { sender_in: $accounts, token_in: $tokens }
      ]
    }
  ) {
    receiver {
      id
      isSuperApp
    }
    sender {
      id
      isSuperApp
    }
    token {
      id
    }
    currentFlowRate
  }
}
